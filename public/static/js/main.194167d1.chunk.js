(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{116:function(t,e,a){"use strict";a.r(e);var n=a(1),i=a.n(n),s=a(55),o=a.n(s),c=(a(62),a(13)),r=a(14),l=a(17),d=a(15),h=a(16),u=a(3),m=(a(63),a(56)),g=a.n(m),p=(a(110),a(112),g.a.initializeApp({apiKey:"AIzaSyDx1nW83id3S5qeTHTf4AZUvttj1TnOalU",authDomain:"mwafront.firebaseapp.com",databaseURL:"https://mwafront.firebaseio.com",projectId:"mwafront",storageBucket:"mwafront.appspot.com",messagingSenderId:"150686074611"})),f=function(t){function e(t){var a;return Object(c.a)(this,e),(a=Object(l.a)(this,Object(d.a)(e).call(this,t))).categoryListing=a.categoryListing.bind(Object(u.a)(Object(u.a)(a))),a}return Object(h.a)(e,t),Object(r.a)(e,[{key:"categoryListing",value:function(t,e){this.props.handleDisplayList(e)}},{key:"render",value:function(){var t=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"col-3",onClick:function(e){return t.categoryListing(e,t.props.cat.name)}},i.a.createElement("span",null,this.props.cat.name)))}}]),e}(n.Component),v=function(t){function e(t){var a;return Object(c.a)(this,e),(a=Object(l.a)(this,Object(d.a)(e).call(this,t))).state={category:"",candidats:[],lastChanged:""},a.app=p,a.database=a.app.database().ref().child("candidats"),a.catagoriesRef=a.database.limitToLast(100),a.handleHome=a.handleHome.bind(Object(u.a)(Object(u.a)(a))),a}return Object(h.a)(e,t),Object(r.a)(e,[{key:"componentWillMount",value:function(){var t=[];this.catagoriesRef.orderByChild("category").equalTo(this.props.cat).once("value",function(e){e.forEach(function(e){e.key;var a=e.val();t.push({img:a.img,category:a.category,votes:a.votes,link:a.link,name:a.name,id:e.key}),this.setState({candidats:t}),this.stateReorder()}.bind(this))}.bind(this))}},{key:"handleHome",value:function(t,e){this.props.goHome(!0)}},{key:"stateReorder",value:function(){var t=this.state.candidats;t.sort(function(t,e){return t.votes-e.votes}).reverse(),this.setState({candidats:t})}},{key:"componentDidMount",value:function(){this.setState({category:this.props.cat}),this.lastChange=this.catagoriesRef.orderByChild("category").equalTo(this.props.cat).on("child_changed",function(t){var e=this,a=this.state.candidats;a.map(function(n,i){return t.key==n.id&&(a[i]={img:t.val().img,category:t.val().category,votes:t.val().votes,link:t.val().link,name:t.val().name,id:t.key},e.lastchanged(t.key)),n}),this.setState({candidats:a}),this.stateReorder()}.bind(this)),this.catagoriesRef.off("child_changed",this.lastChange)}},{key:"lastchanged",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.state.lastChanged=t}},{key:"componentWillUnmount",value:function(){this.setState({category:"",candidats:[]}),this.catagoriesRef.off("child_changed",this.lastChange),this.app.database().ref().child("candidats").off("child_changed",this.lastChange),console.log("unmw")}},{key:"listCandidats",value:function(){var t=[];for(var e in this.state.candidats){var a=void 0;a=this.state.lastChanged==this.state.candidats[e].id?"latest":"",t.push(i.a.createElement("div",{className:a+" media text-muted pt-3",id:this.state.candidats[e].id,key:this.state.candidats[e].id},i.a.createElement("img",{src:this.state.candidats[e].img,width:"32px",height:"32px",alt:this.state.candidats[e].name,className:"mr-2 rounded"}),i.a.createElement("div",{className:"media-body pb-3 mb-0 small lh-125 border-bottom border-gray"},i.a.createElement("div",{className:"d-flex justify-content-between align-items-center w-100"},i.a.createElement("strong",{className:"text-gray-dark"},this.state.candidats[e].name," "),i.a.createElement("a",{href:this.state.candidats[e].link,target:"_blank",rel:"noopener noreferrer"},"View")),i.a.createElement("span",{className:"d-block"},this.state.candidats[e].votes))))}return t}},{key:"render",value:function(){var t=this;return i.a.createElement("div",{className:"col-12"},i.a.createElement("a",{className:"nav-link active",href:"#",onClick:function(e){return t.handleHome(e,!0)}},"Home"),i.a.createElement("h1",{className:"text-center"},this.props.cat),this.listCandidats())}}]),e}(n.Component),y=function(t){function e(t){var a;return Object(c.a)(this,e),(a=Object(l.a)(this,Object(d.a)(e).call(this,t))).displayCategory=function(t){console.log("disp cat"+t),a.setState({isList:!0,currentCategory:t})},a.listCategories=function(){var t=[];for(var e in a.state.categories)t.push(i.a.createElement(f,{cat:a.state.categories[e],handleDisplayList:function(t){return a.displayCategory(t)},key:e}));return t},a.state={categories:[],isList:!1,currentCategory:""},a.app=p,a.database=a.app.database().ref().child("categories"),a.displayCategory=a.displayCategory.bind(Object(u.a)(Object(u.a)(a))),a}return Object(h.a)(e,t),Object(r.a)(e,[{key:"componentWillMount",value:function(){var t=this,e=[];this.catagoriesRef=this.database.limitToLast(100),this.catagoriesRef.on("child_added",function(a){e.push({link:a.val().link,name:a.val().name,id:a.key}),t.setState({categories:e})},function(t){console.error(t)})}},{key:"handleGoHome",value:function(t){this.setState({isList:!1})}},{key:"render",value:function(){var t=this;return i.a.createElement("div",{className:"App"},i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"row"},this.state.isList?i.a.createElement(v,{cat:this.state.currentCategory,goHome:function(e){return t.handleGoHome(e)}}):this.listCategories())))}}]),e}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},57:function(t,e,a){t.exports=a(116)},62:function(t,e,a){},63:function(t,e,a){}},[[57,1,2]]]);
//# sourceMappingURL=main.194167d1.chunk.js.map